<!DOCTYPE html><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="Content-Language" content="en"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>PopupBase</title><link href="dossier.css" rel="stylesheet" type="text/css"><header><div><form><div><input type="search" placeholder="Search"></div></form></div></header><main><article><div class="parentlink"><b>Namespace:</b> <a href="namespace_goog_ui.html">goog.ui</a></div><div class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l49">View Source</a></div><h1>class PopupBase</h1><pre class="inheritance"><a href="class_goog_Disposable.html">goog.Disposable</a>
  &#x2514; <a href="class_goog_events_EventTarget.html">goog.events.EventTarget</a>
      &#x2514; goog.ui.PopupBase</pre><dl><dt>All implemented interfaces:<dd><code><a href="interface_goog_disposable_IDisposable.html">goog.disposable.IDisposable</a></code>, <code><a href="interface_goog_events_Listenable.html">goog.events.Listenable</a></code></dl><p>The PopupBase class provides functionality for showing and hiding a generic container element. It also provides the option for hiding the popup element if the user clicks outside the popup or the popup loses focus.</p><h2 class="main">new PopupBase(<wbr>opt_element, opt_type)</h2><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>opt_element<code>?Element=</code><dd><p>A DOM element for the popup.</p><dt>opt_type<code><a href="enum_goog_ui_PopupBase_Type.html">goog.ui.PopupBase.Type</a>=</code><dd><p>Type of popup.</p></dl></div></div><h2>Instance Methods</h2><div id="addAutoHidePartner" class="function"><div><h3>addAutoHidePartner(<wbr>partner)<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l304">code »</a></span></h3><p>Mouse events that occur within an autoHide partner will not hide a popup set to autoHide.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>partner<code>Element</code><dd><p>The auto hide partner element.</p></dl></div></div></div></div><hr class="fn-sep"><div id="disposeInternal" class="function"><div><h3>disposeInternal()<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l886">code »</a></span></h3><p><b>Overrides: </b><a href="class_goog_events_EventTarget.html#disposeInternal">goog.events.EventTarget</a></p></div></div><hr class="fn-sep"><div id="getAutoHide" class="function"><div><h3>getAutoHide()<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l284">code »</a></span></h3><p>Returns whether the Popup dismisses itself when the user clicks outside of it.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether the Popup autohides on an external click.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getAutoHideRegion" class="function"><div><h3>getAutoHideRegion()<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l366">code »</a></span></h3><p>Returns the region inside which the Popup dismisses itself when the user clicks, or null if it&#39;s the entire document.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code>Element</code><dd><p>The DOM element for autohide, or null if it hasn&#39;t been  set.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getElement" class="function"><div><h3>getElement()<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l263">code »</a></span></h3><p>Returns the dom element that should be used for the popup.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code>Element</code><dd><p>The popup element.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getEnableCrossIframeDismissal" class="function"><div><h3>getEnableCrossIframeDismissal()<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l345">code »</a></span></h3><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether cross iframe dismissal is enabled.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getHandler" class="function"><div><h3><code>&lt;T&gt;</code> getHandler()<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l427">code »</a></span></h3><p>Returns the event handler for the popup. All event listeners belonging to this handler are removed when the tooltip is hidden. Therefore, the recommended usage of this handler is to listen on events in <a href="class_goog_ui_PopupBase.html#onShow_"><code>#onShow_</code></a>.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="class_goog_events_EventHandler.html">goog.events.EventHandler</a>&lt;T&gt;</code><dd><p>Event handler for this popup.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getHideOnEscape" class="function"><div><h3>getHideOnEscape()<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l327">code »</a></span></h3><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether the Popup autohides on the escape key.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getLastHideTime" class="function"><div><h3>getLastHideTime()<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l412">code »</a></span></h3><p>Returns the time when the popup was last hidden.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>time in ms since epoch when the popup was last hidden, or -1 if the popup was never hidden or is currently showing.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getLastShowTime" class="function"><div><h3>getLastShowTime()<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l401">code »</a></span></h3><p>Returns the time when the popup was last shown.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>time in ms since epoch when the popup was last shown, or -1 if the popup was never shown.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getType" class="function"><div><h3>getType()<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l223">code »</a></span></h3><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The type of popup this is.</p></dl></div></div></div></div><hr class="fn-sep"><div id="hidePopupElement" class="function"><div><h3>hidePopupElement()<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l700">code »</a></span></h3><p>Hides the popup element.</p></div></div><hr class="fn-sep"><div id="isOrWasRecentlyVisible" class="function"><div><h3>isOrWasRecentlyVisible()<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l475">code »</a></span></h3><p>Returns whether the popup is currently visible or was visible within about 150 ms ago. This is used by clients to handle a very specific, but common, popup scenario. The button that launches the popup should close the popup on mouse down if the popup is alrady open. The problem is that the popup closes itself during the capture phase of the mouse down and thus the button thinks it&#39;s hidden and this should show it again. This method provides a good heuristic for clients. Typically in their event handler they will have code that is:</p><p>if (menu.isOrWasRecentlyVisible()) {  menu.setVisible(false); } else {  ... // code to position menu and initialize other state  menu.setVisible(true); }</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether the popup is currently visible or was visible  within about 150 ms ago.</p></dl></div></div></div></div><hr class="fn-sep"><div id="isVisible" class="function"><div><h3>isVisible()<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l451">code »</a></span></h3><p>Returns whether the popup is currently visible.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>whether the popup is currently visible.</p></dl></div></div></div></div><hr class="fn-sep"><div id="onBeforeHide_" class="function"><div><h3>onBeforeHide_(<wbr>opt_target)<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l750">code »</a></span></h3><p>Called before the popup is hidden. Derived classes can override to hook this event but should make sure to call the parent class method.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>opt_target<code>?<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>=</code><dd><p>Target of the event causing the hide.</p></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>If anyone called preventDefault on the event object (or  if any of the handlers returns false this will also return false.</p></dl></div></div></div></div><hr class="fn-sep"><div id="onBeforeShow" class="function"><div><h3>onBeforeShow()<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l724">code »</a></span></h3><p>Called before the popup is shown. Derived classes can override to hook this event but should make sure to call the parent class method.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>If anyone called preventDefault on the event object (or  if any of the handlers returns false this will also return false.</p></dl></div></div></div></div><hr class="fn-sep"><div id="onHide_" class="function"><div><h3>onHide_(<wbr>opt_target)<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l765">code »</a></span></h3><p>Called after the popup is hidden. Derived classes can override to hook this event but should make sure to call the parent class method.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>opt_target<code>?<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>=</code><dd><p>Target of the event causing the hide.</p></dl></div></div></div></div><hr class="fn-sep"><div id="onShow_" class="function"><div><h3>onShow_()<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l735">code »</a></span></h3><p>Called after the popup is shown. Derived classes can override to hook this event but should make sure to call the parent class method.</p></div></div><hr class="fn-sep"><div id="removeAutoHidePartner" class="function"><div><h3>removeAutoHidePartner(<wbr>partner)<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l317">code »</a></span></h3><p>Removes a previously registered auto hide partner.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>partner<code>Element</code><dd><p>The auto hide partner element.</p></dl></div></div></div></div><hr class="fn-sep"><div id="reposition" class="function"><div><h3>reposition()<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l506">code »</a></span></h3><p>Repositions the popup according to the current state. Should be overriden by subclases.</p></div></div><hr class="fn-sep"><div id="setAutoHide" class="function"><div><h3>setAutoHide(<wbr>autoHide)<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l293">code »</a></span></h3><p>Sets whether the Popup dismisses itself when the user clicks outside of it.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>autoHide<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether to autohide on an external click.</p></dl></div></div></div></div><hr class="fn-sep"><div id="setAutoHideRegion" class="function"><div><h3>setAutoHideRegion(<wbr>element)<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l376">code »</a></span></h3><p>Sets the region inside which the Popup dismisses itself when the user clicks.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>element<code>Element</code><dd><p>The DOM element for autohide.</p></dl></div></div></div></div><hr class="fn-sep"><div id="setElement" class="function"><div><h3>setElement(<wbr>elt)<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l273">code »</a></span></h3><p>Specifies the dom element that should be used for the popup.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>elt<code>Element</code><dd><p>A DOM element for the popup.</p></dl></div></div></div></div><hr class="fn-sep"><div id="setEnableCrossIframeDismissal" class="function"><div><h3>setEnableCrossIframeDismissal(<wbr>enable)<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l355">code »</a></span></h3><p>Sets whether clicks in other iframes should dismiss this popup. In some cases it should be disabled, because it can cause spurious</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>enable<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether to enable cross iframe dismissal.</p></dl></div></div></div></div><hr class="fn-sep"><div id="setHideOnEscape" class="function"><div><h3>setHideOnEscape(<wbr>hideOnEscape)<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l336">code »</a></span></h3><p>Sets whether the Popup dismisses itself on the escape key.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>hideOnEscape<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether to autohide on the escape key.</p></dl></div></div></div></div><hr class="fn-sep"><div id="setShouldHideAsync" class="function"><div><h3>setShouldHideAsync(<wbr>b)<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l253">code »</a></span></h3><p>Sets whether the popup should hide itself asynchronously using a timeout instead of synchronously.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>b<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether to hide async.</p></dl></div></div></div></div><hr class="fn-sep"><div id="setTransition" class="function"><div><h3>setTransition(<wbr>opt_showTransition, opt_hideTransition)<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l388">code »</a></span></h3><p>Sets transition animation on showing and hiding the popup.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>opt_showTransition<code>?<a href="interface_goog_fx_Transition.html">goog.fx.Transition</a>=</code><dd><p>Transition to play on  showing the popup.</p><dt>opt_hideTransition<code>?<a href="interface_goog_fx_Transition.html">goog.fx.Transition</a>=</code><dd><p>Transition to play on  hiding the popup.</p></dl></div></div></div></div><hr class="fn-sep"><div id="setType" class="function"><div><h3>setType(<wbr>type)<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l233">code »</a></span></h3><p>Specifies the type of popup to use.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>type<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>Type of popup.</p></dl></div></div></div></div><hr class="fn-sep"><div id="setVisible" class="function"><div><h3>setVisible(<wbr>visible)<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l489">code »</a></span></h3><p>Sets whether the popup should be visible. After this method returns, isVisible() will always return the new state, even if there is a transition.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>visible<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Desired visibility state.</p></dl></div></div></div></div><hr class="fn-sep"><div id="shouldHideAsync" class="function"><div><h3>shouldHideAsync()<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l243">code »</a></span></h3><p>Returns whether the popup should hide itself asynchronously using a timeout instead of synchronously.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether to hide async.</p></dl></div></div></div></div><hr class="fn-sep"><div id="showPopupElement" class="function"><div><h3>showPopupElement()<span class="codelink"><a href="source/closure/goog/ui/popupbase.js.src.html#l690">code »</a></span></h3><p>Shows the popup element.</p></div></div><h2>Static Properties</h2><div id="PopupBase.DEBOUNCE_DELAY_MS" class="property"><dl><dt><a href="source/closure/goog/ui/popupbase.js.src.html#l217">PopupBase.DEBOUNCE_DELAY_MS</a><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>A time in ms used to debounce events that happen right after each other.</p><p>A note about why this is necessary. There are two cases to consider. First case, a popup will usually see a focus event right after it&#39;s launched because it&#39;s typical for it to be launched in a mouse-down event which will then move focus to the launching button. We don&#39;t want to think this is a separate user action moving focus. Second case, a user clicks on the launcher button to close the menu. In that case, we&#39;ll close the menu in the focus event and then show it again because of the mouse down event, even though the intention is to just close the menu. This workaround appears to be the least intrusive fix.</p></dl></div><h2>Types</h2><dl><dt><a href="enum_goog_ui_PopupBase_EventType.html">PopupBase.EventType</a><dd><p>Constants for event type fired by Popup</p><dt><a href="enum_goog_ui_PopupBase_Type.html">PopupBase.Type</a><dd><p>Constants for type of Popup</p></dl></article><nav><h3><a href="index.html">Overview</a></h3><div><input type="checkbox" id="nav-types" checked/><label for="nav-types"><h3><span class="selectable">Types</span></h3></label><div id="nav-types-view"></div></div></nav></main><div class="pre-footer"><div></div></div><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer><script src="types.js"></script><script src="dossier.js"></script>